**Generate Your Projects，Chromium 团队开发的跨平台自动化项目构建工具**

GYP is a Meta-Build system: a build system that generates other build systems.

Source code: https://chromium.googlesource.com/external/gyp

Mailing list: http://groups.google.com/group/gyp-developer


### 安装
```
sudo apt-get install gyp  
```

### 简单示例
note\gyp\example

http://blog.csdn.net/bertzhang/article/details/7387954


## 配置文件
- Skeleton of a typical Chromium .gyp file  
```javascript
{
  'variables': {},
  'includes': [
    '../build/common.gypi',
  ],
  'target_defaults': {
  },
  'targets': [
    {
      'target_name': 'target_1',
    },
    {
      'target_name': 'target_2',
    },
  ],
  'conditions': [
    ['OS=="linux"', {
      'targets': [
        {
          'target_name': 'linux_target_3',
        },
      ],
    }],
    ['OS=="win"', {
      'targets': [
        {
          'target_name': 'windows_target_4',
        },
      ],
    }, { # OS != "win"
      'targets': [
        {
          'target_name': 'non_windows_target_5',
        },
    }],
  ],
}
```
`variables`: Definitions of variables that can be interpolated and used in various other parts of the file.

`includes`: A list of of other files that will be included in this file. By convention, included files have the suffix .gypi (gyp include).

`target_defaults`: Settings that will apply to all of the targets defined in this .gyp file.

`targets`: The list of targets for which this .gyp file can generate builds. Each target is a dictionary that contains settings describing all the information necessary to build the target.

`conditions`: A list of condition specifications that can modify the contents of the items in the global dictionary defined by this .gyp file based on the values of different variablwes. As implied by the above example, the most common use of a conditions section in the top-level dictionary is to add platform-specific targets to the targets list.

- Skeleton of a typical **executable** target in a .gyp file
```javascript
{
  'targets': [
    {
      'target_name': 'foo',
      'type': 'executable',
      'msvs_guid': '5ECEC9E5-8F23-47B6-93E0-C3B328B3BE65',
      'dependencies': [
        'xyzzy',
        '../bar/bar.gyp:bar',
      ],
      'defines': [
        'DEFINE_FOO',
        'DEFINE_A_VALUE=value',
      ],
      'include_dirs': [
        '..',
      ],
      'sources': [
        'file1.cc',
        'file2.cc',
      ],
      'conditions': [
        ['OS=="linux"', {
          'defines': [
            'LINUX_DEFINE',
          ],
          'include_dirs': [
            'include/linux',
          ],
        }],
        ['OS=="win"', {
          'defines': [
            'WINDOWS_SPECIFIC_DEFINE',
          ],
        }, { # OS != "win",
          'defines': [
            'NON_WINDOWS_DEFINE',
          ],
        }]
      ],
    },
  ],
}
```
- The top-level settings in the target include:

`target_name`: The name by which the target should be known, which should be unique across all .gyp files. This name will be used as the project name in the generated Visual Studio solution, as the target name in the generated XCode configuration, and as the alias for building this target from the command line of the generated SCons configuration.

`type`: Set to **executable**, logically enough.

`msvs_guid`: THIS IS ONLY TRANSITIONAL. This is a hard-coded GUID values that will be used in the generated Visual Studio solution file(s). This allows us to check in a chrome.sln file that interoperates with gyp-generated project files. Once everything in Chromium is being generated by gyp, it will no longer be important that the GUIDs stay constant across invocations, and we'll likely get rid of these settings.

`dependencies`: This lists other targets that this target depends on. The gyp-generated files will guarantee that the other targets are built before this target. Any library targets in the dependencies list will be linked with this target. The various settings (defines, include_dirs, etc.) listed in the direct_dependent_settings sections of the targets in this list will be applied to how this target is built and linked. See the more complete discussion of direct_dependent_settings, below.

`defines`: The C preprocessor definitions that will be passed in on compilation command lines (using -D or /D options).

`include_dirs`: The directories in which included header files live. These will be passed in on compilation command lines (using -I or /I options).

`sources`: The source files for this target.

`conditions`: A block of conditions that will be evaluated to update the different settings in the target dictionary.

- Skeleton of a typical **library** target in a .gyp file

The vast majority of targets are libraries. Here is an example of a library target including the additional features that should cover most needs of libraries:
```javascript
  {
    'targets': [
      {
        'target_name': 'foo',
        'type': '<(library)'
        'msvs_guid': '5ECEC9E5-8F23-47B6-93E0-C3B328B3BE65',
        'dependencies': [
          'xyzzy',
          '../bar/bar.gyp:bar',
        ],
        'defines': [
          'DEFINE_FOO',
          'DEFINE_A_VALUE=value',
        ],
        'include_dirs': [
          '..',
        ],
        'direct_dependent_settings': {
          'defines': [
            'DEFINE_FOO',
            'DEFINE_ADDITIONAL',
          ],
          'linkflags': [
          ],
        },
        'export_dependent_settings': [
          '../bar/bar.gyp:bar',
        ],
        'sources': [
          'file1.cc',
          'file2.cc',
        ],
        'conditions': [
          ['OS=="linux"', {
            'defines': [
              'LINUX_DEFINE',
            ],
            'include_dirs': [
              'include/linux',
            ],
          ],
          ['OS=="win"', {
            'defines': [
              'WINDOWS_SPECIFIC_DEFINE',
            ],
          }, { # OS != "win",
            'defines': [
              'NON_WINDOWS_DEFINE',
            ],
          }]
        ],
    ],
  }
```
The possible entries in a library target are largely the same as those that can be specified for an executable target (defines, include_dirs, etc.). The differences include:

`type`: This should almost always be set to ‘<(library)’, which allows the user to define at gyp time whether libraries are to be built static or shared. (On Linux, at least, linking with shared libraries saves significant link time.) If it's necessary to pin down the type of library to be built, the type can be set explicitly to static_library or shared_library.

`direct_dependent_settings`: This defines the settings that will be applied to other targets that directly depend on this target--that is, that list this target in their 'dependencies' setting. This is where you list the defines, include_dirs, cflags and linkflags that other targets that compile or link against this target need to build consistently.

`export_dependent_settings`: This lists the targets whose direct_dependent_settings should be “passed on” to other targets that use (depend on) this target. TODO: expand on this description.

